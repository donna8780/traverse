# Traverse

<p align="center">
<img src="https://github.com/user-attachments/assets/ba9fe018-a399-4b50-bfbc-36b761f90f18" width="20%" height="30%">

## 웹 개발팀 

* 개발 기간 : 2024.07~2024.09 (약 6주)
* 개발 인원 : 5명


## 프로젝트 소개

* 국내 여행지 추천 사이트

지도 API와 투어 API를 활용해 여행자들이 쉽게 장소를 탐색하고 추천 받을 수 있는 기능을 구현하고, 이를 통해 사용자 맞춤형 국내 여행지 추천 서비스를 제공하며, 
편리한 여행 계획 수립을 할 수 있습니다.

## Stacks 🐈

|제목|내용|
|------|---|
|Language|<img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white"> <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> <img src="https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white">|
|Frame Work|<img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"> |
|Build Tool|<img src="https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white">|
|Database|<img src="https://img.shields.io/badge/mysql-4479A1.svg?style=for-the-badge&logo=mysql&logoColor=white">|
|Frontend|<img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">|
|Library|<img src="https://img.shields.io/badge/Thymeleaf-%23005C0F.svg?style=for-the-badge&logo=Thymeleaf&logoColor=white">|
|Server|<img src="https://img.shields.io/badge/amazonaws-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white">|
|Version Control|<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">|

## 화면 구성 📺

### 0. 메인페이지

실시간 날씨 정보 확인 및 지역별 지도 클릭이 가능합니다.

<p align="center">
<img src="https://github.com/user-attachments/assets/9899c60f-b674-42f9-baf4-c09bda4432c9" width="30%">
<img src="https://github.com/user-attachments/assets/3cae7909-6dec-4cac-9127-258375b32aab" width="30%">
<img src="https://github.com/user-attachments/assets/61117121-f5f2-4b7e-bd4e-8ca8303bda8f" width="30%">
</p>

### 1. 로그인/회원가입

사용자는 로그인 및 회원가입을 할 수 있습니다.

<p align="center">
<img src="https://github.com/user-attachments/assets/e39b9058-b45f-4c89-bc58-c76bde2282f1" width="40%">

### 2. 마이페이지

프로필 등록 및 수정, 탈퇴 기능을 제공하며, 본인의 여행 후기를 확인할 수 있습니다.

<p align="center">
<img src="https://github.com/user-attachments/assets/daac15de-b45b-4fef-9f90-ac6f548f402e" width="30%">
  <img src="https://github.com/user-attachments/assets/0f01ba8e-1033-45a8-b4ec-40841d7c8083" width="30%">
</p>

### 3. 찜 목록

사용자가 '좋아요'한 찜 목록을 확인할 수 있으며, 해당 목록은 지도와 함께 마커로 표시됩니다.

<p align="center">
<img src="https://github.com/user-attachments/assets/90de882b-b07a-48e2-bff0-793e4ab9fb47" width="40%">

### 4. 고객 지원

자유게시판에서 게시글 작성, 수정, 삭제가 가능하며, 댓글 작성, 수정, 삭제 기능도 제공합니다.

<p align="center">

<img src="https://github.com/user-attachments/assets/8f872cfc-8561-484d-a291-d2ddb2da407a" width="30%">
<img src="https://github.com/user-attachments/assets/3e7b92ad-fc8a-4d16-a0a9-2a2da9fdff34" width="30%">
<img src="https://github.com/user-attachments/assets/e77367a6-5d19-44b3-ad08-2ad36fc5db49" width="30%">
</p>

### 5. 여행 계획

사용자가 작성한 여행 계획을 지도에 마커로 표시하여 확인할 수 있으며, 계획을 수정 및 삭제할 수도 있습니다.


<p align="center">
  <img src="https://github.com/user-attachments/assets/22cc5cc2-7289-4426-bf43-8d27b1ee5272" width="30%">
  <img src="https://github.com/user-attachments/assets/2ec91a49-01c4-4fd8-a306-a39108aa7490" width="30%">
  <img src="https://github.com/user-attachments/assets/bd4f5306-d06f-4c66-9d98-4941497394e0" width="30%">
</p>


### 6. 상세 페이지

해당 지역에서 추천된 장소를 클릭하면, 장소에 대한 상세 페이지를 확인할 수 있습니다. 또한, 후기 및 별점을 남길 수 있습니다.

<p align="center">
<img src="https://github.com/user-attachments/assets/07f26b09-e8b1-4468-85f1-956d41107a6f" width="30%">
   
### 6. 숙소 검색

사용자가 지역을 검색하거나 클릭하면 해당 지역의 추천 숙소 목록이 나타나며, 숙소 클릭 시 예약 페이지로 이동합니다.

<p align="center">
<img src="https://github.com/user-attachments/assets/9011ed84-118c-4902-b7a6-3b7beeb3b962" width="30%">
<img src="https://github.com/user-attachments/assets/bc1a7f45-eec6-47c2-aca3-856468fbc1df" width="30%">
</p>

### 7. 길 찾기
   
출발지와 도착지를 입력하면 지도 상에 마커로 표시되며, 교통정보보기 버튼을 클릭하면 카카오맵으로 이동해 추가 정보를 볼 수 있습니다. 이때, 별도의 주소 재입력은 필요하지 않습니다.


<p align="center">
<img src="https://github.com/user-attachments/assets/a0b6ece6-3a05-47ca-ad55-4e0d0152ba41" width="30%">
<img src="https://github.com/user-attachments/assets/e636ab2a-dbbb-47cc-af08-52d7fdd23696" width="30%">
</p>

### 8. 여행 후기

 사용자들이 작성한 여행 후기가 무작위로 표시되며, 검색 기능을 통해 특정 지역의 후기만 볼 수 있습니다. 또한, 사용자는 여행 후기를 작성할 수 있습니다.
 
<p align="center">
<img src="https://github.com/user-attachments/assets/531f159c-5964-4c66-b159-c3cc9ad47e27" width="30%">
<img src="https://github.com/user-attachments/assets/c92e4ae5-a23d-4861-9e6b-3615cfaae643" width="30%">
</p>

## 주요 기능 📦

1.회원가입 예외 처리
```
@PostMapping("/signUp")
public String signUp(AccountsVO input, RedirectAttributes redirectAttributes) throws DuplicateUserException {
    try {
        // 입력값에 대한 검증 로직 호출
        validateInput(input);
        // 검증 통과 시 service에서 회원가입 로직 호출
        ss.addAccount(input);
        return "redirect:/"; // 회원가입 성공 시 메인 페이지로 리다이렉트

    } catch (NoSuchAlgorithmException e) {
        logger.error("비밀번호 해싱 처리 실패:", e); // 올바른 로그 호출
        redirectAttributes.addFlashAttribute("errorMessage", "서버에서 문제가 발생했습니다. 다시 시도해 주세요.");
        return "redirect:/member/serverError"; // 에러 발생 시 에러 페이지로 리다이렉트

    } catch (DuplicateUserException e) {
        logger.warn("중복된 사용자 정보: " + input.toString(), e); // 올바른 로그 호출
        redirectAttributes.addFlashAttribute("errorMessage", e.getMessage());
        redirectAttributes.addFlashAttribute("duplicateFields", e.getFieldNames()); // 중복된 필드명을 전달
        return "redirect:/member/duplicateError"; // 중복된 정보로 인한 에러 페이지로 리다이렉트

    } catch (ValidationException e) {
        logger.warn("입력값이 유효하지 않음: " + input.toString(), e); // 올바른 로그 호출
        redirectAttributes.addFlashAttribute("errorMessage", e.getMessage());
        return "redirect:/member/validateError"; // 검증 실패 시 회원가입 페이지로 다시 리다이렉트

    } catch (Exception e) {
        logger.error("Unexpected error occurred during signup", e); // 올바른 로그 호출
        redirectAttributes.addFlashAttribute("errorMessage", "예기치 않은 오류가 발생했습니다. 다시 시도해 주세요.");
        return "redirect:/member/signupError"; // 일반적인 예외 처리 후 에러 페이지로 리다이렉트
    }
}

```

입력값 검증 및 예외 처리:
validateInput(input) 메서드를 통해 사용자 입력에 대한 유효성을 검사함으로써, 잘못된 데이터가 서비스 계층으로 넘어가지 않도록 예방함. 이는 비즈니스 로직의 무결성을 보장함.
다양한 예외를 구체적으로 처리하여 각 상황에 맞는 에러 메시지를 사용자에게 전달함으로써, 사용자 경험을 향상시키도록 짬.

로깅 기능:
각 예외에 대해 적절한 로그를 남김으로써, 시스템의 상태를 모니터링할 수 있는 기회를 제공함. 이는 향후 문제 발생 시 디버깅을 용이하게 만듦.

RedirectAttributes 활용:
RedirectAttributes를 사용하여 일회성 데이터를 플래시 속성으로 전달함으로써, 페이지 간에 정보를 안전하게 전달할 수 있음. 이는 중복된 에러 메시지 전송을 피함.


2.여행지 추천 및 계획 기능

2-1.지도상에서 원하는 지역 및 날짜 선택 


2-2.카테고리 별로(문화시설, 관광지, 레포츠, 숙박, 음식점 등) 해당 지역의 추천장소가 지도에 마커로 표시되어 추천됨


2-3.플러스 버튼을 동해 여행 계획에 추가 , 장소 이름 클릭 시 상세 페이지로 이동


2-4.일정에 따른 장소 추가 후 여행 계획 버튼 클릭 시 내가 추가한 장소 확인 가능

3.장소 별 상세 페이지


3-1. 장소에 대한 상세 정보를 확인 가능.
3-2. 후기 및 별점을 남길 수 있는 댓글 기능
3-3. 다른 유저가 해당 장소에 작성한 댓글 및 좋아요 확인 기능.
3-4. 찜 목록에서 확인 가능

4.찜 목록 
장소 별 상세 페이지에서 우측 상단의 하트를 클릭하면, 찜 목록에서 지도에 마커로 표시된 정보를 확인할 수 있음(삭제 가능)



5. 고객지원 ->자유게시판(페이징 처리)
회원가입 한 사용자들이 자유롭게 글 작성 및 댓글 수정 삭제 가능

6. 여행 계획

```
public String[] updateImages(MultipartFile[] images, TraverserStoryVO story) {
    String[] imagePaths = new String[10];
    String uploadDir = "C:/spring/traverse/www/src/main/resources/static/story/";

    for (int i = 0; i < images.length && i < 10; i++) {
        MultipartFile image = images[i];
        if (!image.isEmpty()) {
            String fileName = UUID.randomUUID().toString() + "_" + image.getOriginalFilename();
            File file = new File(uploadDir, fileName);
            try {
                image.transferTo(file);
                imagePaths[i] = fileName;
            } catch (IOException e) {
                e.printStackTrace();
            }
        } else {
            // 기존 이미지를 유지
            imagePaths[i] = story.getImge1(); // 예시로 첫 번째 이미지를 가져옴
        }
    }
    return imagePaths;
}

```
다중 파일 업로드를 가능하게 함:
메서드는 MultipartFile[] images를 매개변수로 받아 여러 파일을 한 번에 처리할 수 있도록 설계됨으로써, 사용자가 여러 이미지를 동시에 업로드할 수 있는 편리함을 제공함.

고유한 파일명 생성을 통해 충돌을 방지함:
UUID.randomUUID().toString()을 사용하여 각 파일에 대해 고유한 이름을 생성함으로써, 파일명 충돌을 방지하고 서버의 데이터 무결성을 유지함.

기존 이미지를 유지함으로써 사용자 경험을 개선함:
사용자가 업로드한 파일이 비어 있을 경우 기존 이미지를 그대로 유지하도록 로직을 구성함으로써, 불필요한 데이터 손실을 방지하고 사용자 경험을 향상시킴.

예외 처리를 통해 안정성을 높임:
try-catch 블록을 통해 파일 전송 중 발생할 수 있는 IOException을 처리함으로써, 코드의 안정성을 증가시킴.

배열을 통한 결과 반환으로 쉽게 처리할 수 있도록 함:
메서드는 배열 imagePaths를 사용하여 모든 이미지 경로를 반환함으로써, 호출 측에서 여러 이미지를 쉽게 관리하고 처리할 수 있도록 도움.
 

## ERD Diagram 📦

<p align="center">
<img src="https://github.com/user-attachments/assets/a352a8b6-542f-4161-ae84-43118944ef09" width="60%">
</p>
